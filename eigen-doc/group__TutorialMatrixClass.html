<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Eigen: Matrix 类</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="eigendoxy.css" rel="stylesheet" type="text/css">
<!--  -->
<script type="text/javascript" src="eigen_navtree_hacks.js"></script>
</head>
<body>
<!--
<div style="background:#FFDDDD;font-size:120%;text-align:center;margin:0;padding:5px">Please, help us to better know about our user community by answering the following short survey:  <a href="https://forms.gle/wpyrxWi18ox9Z5ae9">https://forms.gle/wpyrxWi18ox9Z5ae9</a></div>
-->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Eigen_Silly_Professor_64x64.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname"><a href="http://eigen.tuxfamily.org">Eigen</a>
   &#160;<span id="projectnumber">3.4.0 (git rev e3e74001f7c4bf95f0dde572e8a08c5b2918a3ab)</span>
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__TutorialMatrixClass.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Matrix 类<div class="ingroups"><a class="el" href="group__DenseMatrixManipulation__chapter.html">稠密矩阵和数组的操作</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<p>In <a class="el" href="namespaceEigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a>, all matrices and vectors are objects of the <a class="el" href="classEigen_1_1Matrix.html" title="Matrix 类, also used for vectors and row-vectors.">Matrix</a> template class. Vectors are just a special case of matrices, with either 1 row or 1 column.</p>
<h1><a class="anchor" id="TutorialMatrixFirst3Params"></a>
Matrix 的前三个模板参数</h1>
<p><a class="el" href="classEigen_1_1Matrix.html" title="Matrix 类, also used for vectors and row-vectors.">Matrix</a> 类共有6个模板参数，但是现在只需要知道前三个参数就足够了，其他三个保留参数有默认值，我们现在会将其保留原状态，我们在 <a class="el" href="group__TutorialMatrixClass.html#TutorialMatrixOptTemplParams">discuss below</a>的：</p>
<p><a class="el" href="classEigen_1_1Matrix.html" title="Matrix 类, also used for vectors and row-vectors.">Matrix</a> 的三个必须的模板参数为: </p><div class="fragment"><div class="line">Matrix&lt;typename Scalar, int RowsAtCompileTime, int ColsAtCompileTime&gt;</div>
</div><!-- fragment --> <ul>
<li><code>Scalar</code> 是标量类型,即系数的类型。也就是说，如果你想要一个 floats 组成的矩阵，就在这里选择 <code>float</code> 。 阅读 <a class="el" href="TopicScalarTypes.html">Scalar types</a> 看到所有支持标量类型的列表和如何向其他新类型扩展支持。 </li>
<li><code>RowsAtCompileTime</code> 和 <code>ColsAtCompileTime</code> are the number of rows and columns of the matrix as known at compile time (see <a class="el" href="group__TutorialMatrixClass.html#TutorialMatrixDynamic">below</a> for what to do if the number is not known at compile time).</li>
</ul>
<p>We offer a lot of convenience typedefs to cover the usual cases. For example, <code>Matrix4f</code> is a 4x4 matrix of floats. Here is how it is defined by <a class="el" href="namespaceEigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a>: </p><div class="fragment"><div class="line"><span class="keyword">typedef</span> Matrix&lt;float, 4, 4&gt; Matrix4f;</div>
</div><!-- fragment --><p> We discuss <a class="el" href="group__TutorialMatrixClass.html#TutorialMatrixTypedefs">below</a> these convenience typedefs.</p>
<h1><a class="anchor" id="TutorialMatrixVectors"></a>
Vectors</h1>
<p>As mentioned above, in <a class="el" href="namespaceEigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a>, vectors are just a special case of matrices, with either 1 row or 1 column. The case where they have 1 column is the most common; such vectors are called column-vectors, often abbreviated as just vectors. In the other case where they have 1 row, they are called row-vectors.</p>
<p>For example, the convenience typedef <code>Vector3f</code> is a (column) vector of 3 floats. It is defined as follows by <a class="el" href="namespaceEigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a>: </p><div class="fragment"><div class="line"><span class="keyword">typedef</span> Matrix&lt;float, 3, 1&gt; Vector3f;</div>
</div><!-- fragment --><p> We also offer convenience typedefs for row-vectors, for example: </p><div class="fragment"><div class="line"><span class="keyword">typedef</span> Matrix&lt;int, 1, 2&gt; RowVector2i;</div>
</div><!-- fragment --><h1><a class="anchor" id="TutorialMatrixDynamic"></a>
特殊数值 Dynamic</h1>
<p>当然， <a class="el" href="namespaceEigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a> 不仅限于编译时维度已知的矩阵。<code>RowsAtCompileTime</code> 和 <code>ColsAtCompileTime</code> 模板参数可以取特殊数值 <code>Dynamic</code> ，表示编译时尺寸未知。所以必须作为一个运行中的变量处理。在 <a class="el" href="namespaceEigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a> 术语中，这样的尺寸被认为是一个 <em>dynamic</em> <em>size</em>；而一个编译时尺寸已知的矩阵被称为 <em>fixed</em> <em>size</em>。举例来说，方便的 typedef <code>MatrixXd</code>，表示一个具有动态尺寸的double型矩阵，定义如下： </p><div class="fragment"><div class="line"><span class="keyword">typedef</span> Matrix&lt;double, Dynamic, Dynamic&gt; MatrixXd;</div>
</div><!-- fragment --><p> 类似地，我们定义了一个可解释的 typedef <code>VectorXi</code> 如下； </p><div class="fragment"><div class="line"><span class="keyword">typedef</span> Matrix&lt;int, Dynamic, 1&gt; VectorXi;</div>
</div><!-- fragment --><p> 你可以完美地拥有一个行数固定、列数动态的矩阵，如下： </p><div class="fragment"><div class="line">Matrix&lt;float, 3, Dynamic&gt;</div>
</div><!-- fragment --><h1><a class="anchor" id="TutorialMatrixConstructors"></a>
Constructors</h1>
<p>A default constructor is always available, never performs any dynamic memory allocation, and never initializes the matrix coefficients. You can do: </p><div class="fragment"><div class="line">Matrix3f a;</div>
<div class="line">MatrixXf b;</div>
</div><!-- fragment --><p> Here, </p><ul>
<li><code>a</code> is a 3-by-3 matrix, with a plain float[9] array of uninitialized coefficients, </li>
<li><code>b</code> is a dynamic-size matrix whose size is currently 0-by-0, and whose array of coefficients hasn't yet been allocated at all.</li>
</ul>
<p>Constructors taking sizes are also available. For matrices, the number of rows is always passed first. For vectors, just pass the vector size. They allocate the array of coefficients with the given size, but don't initialize the coefficients themselves: </p><div class="fragment"><div class="line">MatrixXf a(10,15);</div>
<div class="line">VectorXf b(30);</div>
</div><!-- fragment --><p> Here, </p><ul>
<li><code>a</code> is a 10x15 dynamic-size matrix, with allocated but currently uninitialized coefficients. </li>
<li><code>b</code> is a dynamic-size vector of size 30, with allocated but currently uninitialized coefficients.</li>
</ul>
<p>In order to offer a uniform API across fixed-size and dynamic-size matrices, it is legal to use these constructors on fixed-size matrices, even if passing the sizes is useless in this case. So this is legal: </p><div class="fragment"><div class="line">Matrix3f a(3,3);</div>
</div><!-- fragment --><p> and is a no-operation.</p>
<p>Matrices and vectors can also be initialized from lists of coefficients. Prior to C++11, this feature is limited to small fixed-size column or vectors up to size 4: </p><div class="fragment"><div class="line">Vector2d a(5.0, 6.0);</div>
<div class="line">Vector3d b(5.0, 6.0, 7.0);</div>
<div class="line">Vector4d c(5.0, 6.0, 7.0, 8.0);</div>
</div><!-- fragment --><p>If C++11 is enabled, fixed-size column or row vectors of arbitrary size can be initialized by passing an arbitrary number of coefficients: </p><div class="fragment"><div class="line">Vector2i a(1, 2);                      <span class="comment">// A column vector containing the elements {1, 2}</span></div>
<div class="line">Matrix&lt;int, 5, 1&gt; b {1, 2, 3, 4, 5};   <span class="comment">// A row-vector containing the elements {1, 2, 3, 4, 5}</span></div>
<div class="line">Matrix&lt;int, 1, 5&gt; c = {1, 2, 3, 4, 5}; <span class="comment">// A column vector containing the elements {1, 2, 3, 4, 5}</span></div>
</div><!-- fragment --><p>In the general case of matrices and vectors with either fixed or runtime sizes, coefficients have to be grouped by rows and passed as an initializer list of initializer list (<a class="el" href="classEigen_1_1Matrix.html#afaad3c2d97f248465fa63ce43ac9eb42">details </a>): </p><div class="fragment"><div class="line">MatrixXi a {      <span class="comment">// construct a 2x2 matrix</span></div>
<div class="line">      {1, 2},     <span class="comment">// first row</span></div>
<div class="line">      {3, 4}      <span class="comment">// second row</span></div>
<div class="line">};</div>
<div class="line">Matrix&lt;double, 2, 3&gt; b {</div>
<div class="line">      {2, 3, 4},</div>
<div class="line">      {5, 6, 7},</div>
<div class="line">};</div>
</div><!-- fragment --><p>For column or row vectors, implicit transposition is allowed. This means that a column vector can be initialized from a single row: </p><div class="fragment"><div class="line">VectorXd a {{1.5, 2.5, 3.5}};             <span class="comment">// A column-vector with 3 coefficients</span></div>
<div class="line">RowVectorXd b {{1.0, 2.0, 3.0, 4.0}};     <span class="comment">// A row-vector with 4 coefficients</span></div>
</div><!-- fragment --><h1><a class="anchor" id="TutorialMatrixCoeffAccessors"></a>
Coefficient accessors</h1>
<p>The primary coefficient accessors and mutators in <a class="el" href="namespaceEigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a> are the overloaded parenthesis operators. For matrices, the row index is always passed first. For vectors, just pass one index. The numbering starts at 0. This example is self-explanatory:</p>
<table class="example">
<tr>
<th>Example:</th><th>Output: </th></tr>
<tr>
<td><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;Eigen/Dense&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceEigen.html">Eigen</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">  MatrixXd m(2,2);</div>
<div class="line">  m(0,0) = 3;</div>
<div class="line">  m(1,0) = 2.5;</div>
<div class="line">  m(0,1) = -1;</div>
<div class="line">  m(1,1) = m(1,0) + m(0,1);</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Here is the matrix m:\n&quot;</span> &lt;&lt; m &lt;&lt; std::endl;</div>
<div class="line">  VectorXd v(2);</div>
<div class="line">  v(0) = 4;</div>
<div class="line">  v(1) = v(0) - 1;</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;Here is the vector v:\n&quot;</span> &lt;&lt; v &lt;&lt; std::endl;</div>
<div class="line">}</div>
<div class="ttc" id="anamespaceEigen_html"><div class="ttname"><a href="namespaceEigen.html">Eigen</a></div><div class="ttdoc">Namespace containing all symbols from the Eigen library.</div><div class="ttdef"><b>Definition:</b> Core:141</div></div>
</div><!-- fragment -->  </td><td><pre class="fragment">Here is the matrix m:
  3  -1
2.5 1.5
Here is the vector v:
4
3
</pre> </td></tr>
</table>
<p>Note that the syntax <code> m(index) </code> is not restricted to vectors, it is also available for general matrices, meaning index-based access in the array of coefficients. This however depends on the matrix's storage order. All <a class="el" href="namespaceEigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a> matrices default to column-major storage order, but this can be changed to row-major, see <a class="el" href="group__TopicStorageOrders.html">存储指令</a>.</p>
<p>The operator[] is also overloaded for index-based access in vectors, but keep in mind that C++ doesn't allow operator[] to take more than one argument. We restrict operator[] to vectors, because an awkwardness in the C++ language would make matrix[i,j] compile to the same thing as matrix[j] !</p>
<h1><a class="anchor" id="TutorialMatrixCommaInitializer"></a>
Comma-initialization</h1>
<p>Matrix and vector coefficients can be conveniently set using the so-called <em>comma-initializer</em> syntax. For now, it is enough to know this example:</p>
<table class="example">
<tr>
<th>Example:</th><th>Output: </th></tr>
<tr>
<td><div class="fragment"><div class="line">Matrix3f m;</div>
<div class="line">m &lt;&lt; 1, 2, 3,</div>
<div class="line">     4, 5, 6,</div>
<div class="line">     7, 8, 9;</div>
<div class="line">std::cout &lt;&lt; m;</div>
</div><!-- fragment -->  </td><td><pre class="fragment">1 2 3
4 5 6
7 8 9</pre>  </td></tr>
</table>
<p>The right-hand side can also contain matrix expressions as discussed in <a class="el" href="group__TutorialAdvancedInitialization.html">this page</a>.</p>
<h1><a class="anchor" id="TutorialMatrixSizesResizing"></a>
Resizing</h1>
<p>The current size of a matrix can be retrieved by <a class="el" href="structEigen_1_1EigenBase.html#ac22eb0695d00edd7d4a3b2d0a98b81c2">rows()</a>, <a class="el" href="structEigen_1_1EigenBase.html#a2d768a9877f5f69f49432d447b552bfe">cols() </a> and <a class="el" href="structEigen_1_1EigenBase.html#ae106171b6fefd3f7af108a8283de36c9">size()</a>. These methods return the number of rows, the number of columns and the number of coefficients, respectively. Resizing a dynamic-size matrix is done by the <a class="el" href="classEigen_1_1PlainObjectBase.html#a9fd0703bd7bfe89d6dc80e2ce87c312a">resize() </a> method.</p>
<table class="example">
<tr>
<th>Example:</th><th>Output: </th></tr>
<tr>
<td><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;Eigen/Dense&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceEigen.html">Eigen</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">  MatrixXd m(2,5);</div>
<div class="line">  m.resize(4,3);</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;The matrix m is of size &quot;</span></div>
<div class="line">            &lt;&lt; m.rows() &lt;&lt; <span class="stringliteral">&quot;x&quot;</span> &lt;&lt; m.cols() &lt;&lt; std::endl;</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;It has &quot;</span> &lt;&lt; m.size() &lt;&lt; <span class="stringliteral">&quot; coefficients&quot;</span> &lt;&lt; std::endl;</div>
<div class="line">  VectorXd v(2);</div>
<div class="line">  v.resize(5);</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;The vector v is of size &quot;</span> &lt;&lt; v.size() &lt;&lt; std::endl;</div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;As a matrix, v is of size &quot;</span></div>
<div class="line">            &lt;&lt; v.rows() &lt;&lt; <span class="stringliteral">&quot;x&quot;</span> &lt;&lt; v.cols() &lt;&lt; std::endl;</div>
<div class="line">}</div>
</div><!-- fragment -->  </td><td><pre class="fragment">The matrix m is of size 4x3
It has 12 coefficients
The vector v is of size 5
As a matrix, v is of size 5x1
</pre>  </td></tr>
</table>
<p>The resize() method is a no-operation if the actual matrix size doesn't change; otherwise it is destructive: the values of the coefficients may change. If you want a conservative variant of resize() which does not change the coefficients, use <a class="el" href="classEigen_1_1PlainObjectBase.html#a712c25be1652e5a64a00f28c8ed11462">conservativeResize()</a>, see <a class="el" href="TopicResizing.html">this page</a> for more details.</p>
<p>All these methods are still available on fixed-size matrices, for the sake of API uniformity. Of course, you can't actually resize a fixed-size matrix. Trying to change a fixed size to an actually different value will trigger an assertion failure; but the following code is legal:</p>
<table class="example">
<tr>
<th>Example:</th><th>Output: </th></tr>
<tr>
<td><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;Eigen/Dense&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceEigen.html">Eigen</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main()</div>
<div class="line">{</div>
<div class="line">  Matrix4d m;</div>
<div class="line">  m.resize(4,4); <span class="comment">// no operation</span></div>
<div class="line">  std::cout &lt;&lt; <span class="stringliteral">&quot;The matrix m is of size &quot;</span></div>
<div class="line">            &lt;&lt; m.rows() &lt;&lt; <span class="stringliteral">&quot;x&quot;</span> &lt;&lt; m.cols() &lt;&lt; std::endl;</div>
<div class="line">}</div>
</div><!-- fragment -->  </td><td><pre class="fragment">The matrix m is of size 4x4
</pre>  </td></tr>
</table>
<h1><a class="anchor" id="TutorialMatrixAssignment"></a>
Assignment and resizing</h1>
<p>Assignment is the action of copying a matrix into another, using <code>operator=</code>. <a class="el" href="namespaceEigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a> resizes the matrix on the left-hand side automatically so that it matches the size of the matrix on the right-hand size. For example:</p>
<table class="example">
<tr>
<th>Example:</th><th>Output: </th></tr>
<tr>
<td><div class="fragment"><div class="line">MatrixXf a(2,2);</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;a is of size &quot;</span> &lt;&lt; a.rows() &lt;&lt; <span class="stringliteral">&quot;x&quot;</span> &lt;&lt; a.cols() &lt;&lt; std::endl;</div>
<div class="line">MatrixXf b(3,3);</div>
<div class="line">a = b;</div>
<div class="line">std::cout &lt;&lt; <span class="stringliteral">&quot;a is now of size &quot;</span> &lt;&lt; a.rows() &lt;&lt; <span class="stringliteral">&quot;x&quot;</span> &lt;&lt; a.cols() &lt;&lt; std::endl;</div>
</div><!-- fragment -->  </td><td><pre class="fragment">a is of size 2x2
a is now of size 3x3
</pre>  </td></tr>
</table>
<p>Of course, if the left-hand side is of fixed size, resizing it is not allowed.</p>
<p>If you do not want this automatic resizing to happen (for example for debugging purposes), you can disable it, see <a class="el" href="TopicResizing.html">this page</a>.</p>
<h1><a class="anchor" id="TutorialMatrixFixedVsDynamic"></a>
Fixed vs. Dynamic size</h1>
<p>When should one use fixed sizes (e.g. <code>Matrix4f</code>), and when should one prefer dynamic sizes (e.g. <code>MatrixXf</code>)? The simple answer is: use fixed sizes for very small sizes where you can, and use dynamic sizes for larger sizes or where you have to. For small sizes, especially for sizes smaller than (roughly) 16, using fixed sizes is hugely beneficial to performance, as it allows <a class="el" href="namespaceEigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a> to avoid dynamic memory allocation and to unroll loops. Internally, a fixed-size <a class="el" href="namespaceEigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a> matrix is just a plain array, i.e. doing </p><div class="fragment"><div class="line">Matrix4f mymatrix; </div>
</div><!-- fragment --><p> really amounts to just doing </p><div class="fragment"><div class="line"><span class="keywordtype">float</span> mymatrix[16]; </div>
</div><!-- fragment --><p> so this really has zero runtime cost. By contrast, the array of a dynamic-size matrix is always allocated on the heap, so doing </p><div class="fragment"><div class="line">MatrixXf mymatrix(rows,columns); </div>
</div><!-- fragment --><p> amounts to doing </p><div class="fragment"><div class="line"><span class="keywordtype">float</span> *mymatrix = <span class="keyword">new</span> <span class="keywordtype">float</span>[rows*columns]; </div>
</div><!-- fragment --><p> and in addition to that, the MatrixXf object stores its number of rows and columns as member variables.</p>
<p>The limitation of using fixed sizes, of course, is that this is only possible when you know the sizes at compile time. Also, for large enough sizes, say for sizes greater than (roughly) 32, the performance benefit of using fixed sizes becomes negligible. Worse, trying to create a very large matrix using fixed sizes inside a function could result in a stack overflow, since <a class="el" href="namespaceEigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a> will try to allocate the array automatically as a local variable, and this is normally done on the stack. Finally, depending on circumstances, <a class="el" href="namespaceEigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a> can also be more aggressive trying to vectorize (use SIMD instructions) when dynamic sizes are used, see <a class="el" href="TopicVectorization.html">Vectorization</a>.</p>
<h1><a class="anchor" id="TutorialMatrixOptTemplParams"></a>
Optional template parameters</h1>
<p>We mentioned at the beginning of this page that the <a class="el" href="classEigen_1_1Matrix.html" title="Matrix 类, also used for vectors and row-vectors.">Matrix</a> class takes six template parameters, but so far we only discussed the first three. The remaining three parameters are optional. Here is the complete list of template parameters: </p><div class="fragment"><div class="line">Matrix&lt;<span class="keyword">typename</span> Scalar,</div>
<div class="line">       <span class="keywordtype">int</span> RowsAtCompileTime,</div>
<div class="line">       <span class="keywordtype">int</span> ColsAtCompileTime,</div>
<div class="line">       <span class="keywordtype">int</span> Options = 0,</div>
<div class="line">       <span class="keywordtype">int</span> MaxRowsAtCompileTime = RowsAtCompileTime,</div>
<div class="line">       <span class="keywordtype">int</span> MaxColsAtCompileTime = ColsAtCompileTime&gt;</div>
</div><!-- fragment --> <ul>
<li><code>Options</code> is a bit field. Here, we discuss only one bit: <code>RowMajor</code>. It specifies that the matrices of this type use row-major storage order; by default, the storage order is column-major. See the page on <a class="el" href="group__TopicStorageOrders.html">storage orders</a>. For example, this type means row-major 3x3 matrices: <div class="fragment"><div class="line">Matrix&lt;float, 3, 3, RowMajor&gt;</div>
</div><!-- fragment --> </li>
<li><code>MaxRowsAtCompileTime</code> and <code>MaxColsAtCompileTime</code> are useful when you want to specify that, even though the exact sizes of your matrices are not known at compile time, a fixed upper bound is known at compile time. The biggest reason why you might want to do that is to avoid dynamic memory allocation. For example the following matrix type uses a plain array of 12 floats, without dynamic memory allocation: <div class="fragment"><div class="line">Matrix&lt;float, Dynamic, Dynamic, 0, 3, 4&gt;</div>
</div><!-- fragment --></li>
</ul>
<h1><a class="anchor" id="TutorialMatrixTypedefs"></a>
Convenience typedefs</h1>
<p><a class="el" href="namespaceEigen.html" title="Namespace containing all symbols from the Eigen library.">Eigen</a> defines the following <a class="el" href="classEigen_1_1Matrix.html" title="Matrix 类, also used for vectors and row-vectors.">Matrix</a> typedefs: </p><ul>
<li>MatrixNt for Matrix&lt;type, N, N&gt;. For example, MatrixXi for Matrix&lt;int, Dynamic, Dynamic&gt;. </li>
<li>VectorNt for Matrix&lt;type, N, 1&gt;. For example, Vector2f for Matrix&lt;float, 2, 1&gt;. </li>
<li>RowVectorNt for Matrix&lt;type, 1, N&gt;. For example, RowVector3d for Matrix&lt;double, 1, 3&gt;.</li>
</ul>
<p>Where: </p><ul>
<li>N can be any one of <code>2</code>, <code>3</code>, <code>4</code>, or <code>X</code> (meaning <code>Dynamic</code>). </li>
<li>t can be any one of <code>i</code> (meaning int), <code>f</code> (meaning float), <code>d</code> (meaning double), <code>cf</code> (meaning complex&lt;float&gt;), or <code>cd</code> (meaning complex&lt;double&gt;). The fact that typedefs are only defined for these five types doesn't mean that they are the only supported scalar types. For example, all standard integer types are supported, see <a class="el" href="TopicScalarTypes.html">Scalar types</a>. </li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Wed Aug 18 2021 14:57:20 for Eigen by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
